<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Editor Web en Espa침ol - V6.0</title>
  <style>
    :root {
      --bg-color: #121212;
      --text-color: #f0f0f0;
      --highlight-color: #00ffd0;
      --block-bg: #1e1e1e;
      --block-border: #333;
      --header-bg: #2c2c2c;
      --button-bg: #00b894;
      --button-hover-bg: #019875;
      --textarea-bg: #222;
      --preview-bg: #fff;
    }
    body.light-theme {
      --bg-color: #f0f0f0;
      --text-color: #121212;
      --highlight-color: #008f7a;
      --block-bg: #e0e0e0;
      --block-border: #ccc;
      --header-bg: #d4d4d4;
      --button-bg: #00b894;
      --button-hover-bg: #019875;
      --textarea-bg: #e9e9e9;
      --preview-bg: #fff;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: Arial, sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      display: flex;
      flex-direction: column;
      height: 100vh;
      transition: background-color 0.3s, color 0.3s;
    }
    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--block-bg);
      padding: 10px 15px;
      border-bottom: 1px solid var(--block-border);
    }
    .top-bar h1 {
      font-size: 16px;
      color: var(--highlight-color);
    }
    .top-bar .acciones {
      display: flex;
      gap: 8px;
    }
    .top-bar button {
      font-size: 12px;
      padding: 5px 8px;
      border-radius: 3px;
      background: var(--button-bg);
      border: none;
      cursor: pointer;
      color: white;
      transition: background 0.3s;
    }
    .top-bar button:hover { background: var(--button-hover-bg); }
    .bloques {
      display: flex;
      flex: 1;
      overflow-x: auto;
      gap: 15px;
      padding: 10px;
    }
    .bloque {
      flex: 1;
      display: flex;
      flex-direction: column;
      min-width: 320px;
      background: var(--block-bg);
      border: 1px solid var(--block-border);
      border-radius: 5px;
    }
    .bloque-header {
      background: var(--header-bg);
      padding: 6px;
      color: var(--highlight-color);
      font-weight: bold;
      text-align: center;
    }
    .borrador, .editor {
      display: flex;
      flex-direction: column;
      padding: 6px;
    }
    textarea {
      height: 120px;
      background: var(--textarea-bg);
      color: var(--text-color);
      border: none;
      padding: 10px;
      font-size: 13px;
      resize: none;
      outline: none;
      border-radius: 4px;
      transition: background-color 0.3s, color 0.3s;
    }
    .btns {
      display: flex;
      justify-content: space-between;
      margin-top: 5px;
    }
    .btns button {
      flex: 1;
      margin: 0 2px;
      padding: 6px;
      font-size: 12px;
      border: none;
      border-radius: 3px;
      cursor: pointer;
      background: var(--button-bg);
      color: #fff;
    }
    .btns button:hover { background: var(--button-hover-bg); }
    .preview-container {
      flex: 1;
      background: var(--preview-bg);
      margin: 10px;
      border-radius: 5px;
      overflow: hidden;
    }
    iframe {
      width: 100%;
      height: 100%;
      border: none;
    }
    .copiado-card {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--block-bg);
      color: var(--text-color);
      padding: 10px 15px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      font-size: 14px;
      opacity: 0;
      transform: translateY(-20px);
      transition: all 0.3s ease-in-out;
      z-index: 9999;
    }
    .copiado-card.show {
      opacity: 1;
      transform: translateY(0);
    }
  </style>
</head>
<body>

  <div class="top-bar">
    <h1>游깷 Editor Web en Espa침ol - V6.0</h1>
    <div class="acciones">
      <button onclick="updatePreview()">Actualizar Vista</button>
      <button onclick="limpiarEditor()">Borrar Todo</button>
      <button onclick="toggleTheme()">Cambiar Tema</button>
      <button onclick="descargarArchivos()">Descargar</button>
    </div>
  </div>

  <div class="bloques">
    <div class="bloque">
      <div class="bloque-header">HTML</div>
      <div class="borrador">
        <textarea id="borradorHtml" placeholder="Escribe HTML en espa침ol..."></textarea>
        <div class="btns">
          <button onclick="transcribir('borradorHtml', 'htmlCode')">Traducir</button>
          <button onclick="document.getElementById('borradorHtml').value=''">Borrar</button>
        </div>
      </div>
      <div class="editor">
        <textarea id="htmlCode" placeholder="HTML traducido..."></textarea>
        <div class="btns">
          <button onclick="formatearCodigo('htmlCode')">Formatear</button>
          <button onclick="copiarAlPortapapeles('htmlCode')">Copiar</button>
        </div>
      </div>
    </div>

    <div class="bloque">
      <div class="bloque-header">CSS</div>
      <div class="borrador">
        <textarea id="borradorCss" placeholder="Escribe CSS en espa침ol..."></textarea>
        <div class="btns">
          <button onclick="transcribir('borradorCss', 'cssCode')">Traducir</button>
          <button onclick="document.getElementById('borradorCss').value=''">Borrar</button>
        </div>
      </div>
      <div class="editor">
        <textarea id="cssCode" placeholder="CSS traducido..."></textarea>
        <div class="btns">
          <button onclick="formatearCodigo('cssCode')">Formatear</button>
          <button onclick="copiarAlPortapapeles('cssCode')">Copiar</button>
        </div>
      </div>
    </div>

    <div class="bloque">
      <div class="bloque-header">JavaScript</div>
      <div class="borrador">
        <textarea id="borradorJs" placeholder="Escribe JS en espa침ol..."></textarea>
        <div class="btns">
          <button onclick="transcribir('borradorJs', 'jsCode')">Traducir</button>
          <button onclick="document.getElementById('borradorJs').value=''">Borrar</button>
        </div>
      </div>
      <div class="editor">
        <textarea id="jsCode" placeholder="JS traducido..."></textarea>
        <div class="btns">
          <button onclick="formatearCodigo('jsCode')">Formatear</button>
          <button onclick="copiarAlPortapapeles('jsCode')">Copiar</button>
        </div>
      </div>
    </div>
  </div>

  <div class="preview-container">
    <iframe id="preview"></iframe>
  </div>

  <div id="copiadoCard" class="copiado-card"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.14.0/beautify-html.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.14.0/beautify-css.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.14.0/beautify.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

  <script>


function traducirHTML(texto) {
  return texto
    // Bloques principales
    .replace(/documento\s*(.*?)fin documento/gs, "<html>$1</html>")
    .replace(/metadatos\s*(.*?)fin metadatos/gs, "<head>$1</head>")
    .replace(/cuerpo\s*(.*?)fin cuerpo/gs, "<body>$1</body>")
    // Secciones sem치nticas
    .replace(/cabecera\s*(.*?)fin cabecera/gs, "<header>$1</header>")
    .replace(/navegaci칩n\s*(.*?)fin navegaci칩n/gs, "<nav>$1</nav>")
    .replace(/secci칩n\s*(.*?)fin secci칩n/gs, "<section>$1</section>")
    .replace(/art칤culo\s*(.*?)fin art칤culo/gs, "<article>$1</article>")
    .replace(/pie de p치gina\s*(.*?)fin pie de p치gina/gs, "<footer>$1</footer>")
    // Etiquetas de contenido
    .replace(/t칤tulo\s*(.*?)fin t칤tulo/gs, "<title>$1</title>")
    .replace(/p치rrafo\s*(.*?)fin p치rrafo/gs, "<p>$1</p>")
    .replace(/encabezado principal\s*(.*?)fin encabezado principal/gs, "<h1>$1</h1>")
    .replace(/encabezado secundario\s*(.*?)fin encabezado secundario/gs, "<h2>$1</h2>")
    .replace(/divisi칩n\s*(.*?)fin divisi칩n/gs, "<div>$1</div>")
    .replace(/bot칩n\s*(.*?)fin bot칩n/gs, "<button>$1</button>")
    .replace(/salto de l칤nea/g, "<br>")
    // Enlaces e Im치genes con atributos
    .replace(/enlace a\s*"(.*?)"\s*(.*?)fin enlace/gs, "<a href=\"$1\">$2</a>")
    .replace(/imagen fuente\s*"(.*?)" texto alternativo\s*"(.*?)"/g, "<img src=\"$1\" alt=\"$2\">")
    .replace(/imagen fuente\s*"(.*?)"/g, "<img src=\"$1\">") // Regla para im치genes sin alt
    // Listas
    .replace(/lista desordenada\s*(.*?)fin lista desordenada/gs, "<ul>$1</ul>")
    .replace(/lista ordenada\s*(.*?)fin lista ordenada/gs, "<ol>$1</ol>")
    .replace(/elemento de lista\s*(.*?)fin elemento de lista/gs, "<li>$1</li>")
    // Tablas
    .replace(/tabla\s*(.*?)fin tabla/gs, "<table>$1</table>")
    .replace(/fila\s*(.*?)fin fila/gs, "<tr>$1</tr>")
    .replace(/celda\s*(.*?)fin celda/gs, "<td>$1</td>")
    // Formularios
    .replace(/formulario\s*(.*?)fin formulario/gs, "<form>$1</form>")
    .replace(/etiqueta para\s*"(.*?)"\s*(.*?)/g, "<label for=\"$1\">$2</label>")
    .replace(/entrada de texto con nombre\s*"(.*?)" y marcador\s*"(.*?)"/g, "<input type='text' name=\"$1\" placeholder=\"$2\">")
    .replace(/bot칩n de env칤o/g, "<input type='submit'>")
    // Formato de texto
    .replace(/negrita\s*(.*?)fin negrita/g, "<strong>$1</strong>")
    .replace(/cursiva\s*(.*?)fin cursiva/g, "<em>$1</em>");
}

function traducirCSS(texto) {
  return texto
    .replace(/color de fondo/g, "background-color")
    .replace(/color de texto/g, "color")
    .replace(/tama침o de fuente/g, "font-size")
    .replace(/grosor de fuente/g, "font-weight")
    .replace(/centrar texto/g, "text-align: center;")
    .replace(/negrita/g, "font-weight: bold;")
    .replace(/cursiva/g, "font-style: italic;")
    .replace(/margen/g, "margin")
    .replace(/relleno/g, "padding")
    .replace(/ancho/g, "width")
    .replace(/alto/g, "height")
    .replace(/ancho m치ximo/g, "max-width")
    .replace(/alto m치ximo/g, "max-height")
    .replace(/ancho m칤nimo/g, "min-width")
    .replace(/alto m칤nimo/g, "min-height")
    .replace(/borde redondeado/g, "border-radius")
    .replace(/sombra de caja/g, "box-shadow")
    .replace(/sombra de texto/g, "text-shadow")
    .replace(/opacidad/g, "opacity")
    .replace(/posici칩n/g, "position")
    .replace(/superior/g, "top")
    .replace(/derecha/g, "right")
    .replace(/inferior/g, "bottom")
    .replace(/izquierda/g, "left")
    .replace(/flotar/g, "float")
    .replace(/mostrar en bloque/g, "display: block;")
    .replace(/mostrar en l칤nea/g, "display: inline;")
    .replace(/mostrar flexible/g, "display: flex;")
    .replace(/justificar contenido/g, "justify-content")
    .replace(/alinear 칤tems/g, "align-items")
    .replace(/direcci칩n de flex/g, "flex-direction")
    .replace(/envoltura de flex/g, "flex-wrap")
    .replace(/animaci칩n/g, "animation")
    .replace(/transici칩n/g, "transition")
    .replace(/transformar/g, "transform")
    .replace(/autom치tico/g, "auto")
    .replace(/fuente familia/g, "font-family")
    // Unidades
    .replace(/p칤xeles/g, "px")
    .replace(/em/g, "em")
    .replace(/porcentaje/g, "%")
    // Selectores
    .replace(/encabezado principal/g, "h1")
    .replace(/encabezado secundario/g, "h2")
    .replace(/p치rrafo/g, "p")
    .replace(/bot칩n/g, "button")
    .replace(/lista desordenada/g, "ul")
    .replace(/elemento de lista/g, "li")
    .replace(/divisi칩n/g, "div")
    .replace(/enlace/g, "a")
    .replace(/tabla/g, "table")
    .replace(/fila/g, "tr")
    .replace(/celda/g, "td")
    .replace(/formulario/g, "form")
    .replace(/entrada/g, "input");
}

function traducirJS(texto) {
  return texto
    // Funciones b치sicas
    .replace(/mostrar alerta/g, "alert")
    .replace(/obtener elemento por id/g, "document.getElementById")
    .replace(/obtener elementos por clase/g, "document.getElementsByClassName")
    .replace(/obtener elementos por etiqueta/g, "document.getElementsByTagName")
    .replace(/selector de consulta/g, "document.querySelector")
    .replace(/selector de consulta todos/g, "document.querySelectorAll")
    .replace(/crear elemento/g, "document.createElement")
    .replace(/agregar hijo/g, "appendChild")
    .replace(/eliminar hijo/g, "removeChild")
    .replace(/cuando se haga clic/g, "addEventListener('click', function()")
    .replace(/cuando el rat칩n entra/g, "addEventListener('mouseover', function()")
    .replace(/cuando el rat칩n sale/g, "addEventListener('mouseout', function()")
    .replace(/cuando se env칤e el formulario/g, "addEventListener('submit', function()")
    .replace(/fin evento/g, "})")
    .replace(/contenido/g, "innerHTML")
    .replace(/valor/g, "value")
    .replace(/clase/g, "className")
    .replace(/si/g, "if")
    .replace(/hacer/g, "{")
    .replace(/fin si/g, "}")
    .replace(/sino/g, "else")
    .replace(/funci칩n/g, "function")
    .replace(/constante/g, "const")
    .replace(/variable/g, "var")
    .replace(/let/g, "let")
    .replace(/retornar/g, "return")
    .replace(/para cada/g, "forEach")
    .replace(/mapear/g, "map")
    .replace(/filtrar/g, "filter")
    .replace(/bucle para/g, "for")
    .replace(/nueva/g, "new")
    .replace(/documento/g, "document")
    .replace(/consola/g, "console")
    .replace(/registrar/g, "log")
    // L칩gica as칤ncrona
    .replace(/funci칩n as칤ncrona/g, "async function")
    .replace(/esperar/g, "await")
    .replace(/obtener de URL/g, "fetch");
}



    // --- NUEVAS FUNCIONES DE TRADUCCI칍N ---
    // [C칍DIGO DE LAS TRES FUNCIONES DE TRADUCCI칍N DE ARRIBA]
    
    // --- L칍GICA DEL EDITOR ---
    function transcribir(borradorId, editorId) {
      const borrador = document.getElementById(borradorId).value;
      let traducido = "";
      let tipo = "";

      if (borradorId.includes("Html")) {
        traducido = traducirHTML(borrador);
        tipo = "html";
      } else if (borradorId.includes("Css")) {
        traducido = traducirCSS(borrador);
        tipo = "css";
      } else if (borradorId.includes("Js")) {
        traducido = traducirJS(borrador);
        tipo = "js";
      }

      // Validar sintaxis simple
      if (!validarCodigo(borrador, tipo)) {
        alert("춰Error de sintaxis! Aseg칰rate de cerrar todas las etiquetas con 'fin' (ej: 'fin p치rrafo').");
      }

      document.getElementById(editorId).value = traducido;
      updatePreview();
    }

    // --- NUEVA L칍GICA DE FORMATEO Y DESCARGA ---
    function formatearCodigo(id) {
      const textarea = document.getElementById(id);
      let codigo = textarea.value;
      let codigoFormateado = "";
      const opciones = { indent_size: 2, space_in_empty_paren: true };

      if (id.includes('html')) {
        codigoFormateado = html_beautify(codigo, opciones);
      } else if (id.includes('css')) {
        codigoFormateado = css_beautify(codigo, opciones);
      } else if (id.includes('js')) {
        codigoFormateado = js_beautify(codigo, opciones);
      }
      textarea.value = codigoFormateado;
    }

    async function descargarArchivos() {
      const htmlCode = document.getElementById("htmlCode").value;
      const cssCode = document.getElementById("cssCode").value;
      const jsCode = document.getElementById("jsCode").value;
      const zip = new JSZip();

      // Crea los archivos con el c칩digo
      zip.file("index.html", htmlCode);
      zip.file("style.css", cssCode);
      zip.file("script.js", jsCode);

      const content = await zip.generateAsync({ type: "blob" });
      saveAs(content, "proyecto_web.zip");
    }

    // --- FUNCI칍N DE VALIDACI칍N B츼SICA ---
    function validarCodigo(texto, tipo) {
      let errores = 0;
      if (tipo === "html") {
        // Validaci칩n simple para detectar etiquetas de bloque sin cerrar
        const etiquetas = texto.match(/(p치rrafo|divisi칩n|documento|cuerpo|cabecera|navegaci칩n|secci칩n|art칤culo|pie de p치gina|lista desordenada|lista ordenada|tabla|fila|celda)/g) || [];
        const cierres = texto.match(/(fin p치rrafo|fin divisi칩n|fin documento|fin cuerpo|fin cabecera|fin navegaci칩n|fin secci칩n|fin art칤culo|fin pie de p치gina|fin lista desordenada|fin lista ordenada|fin tabla|fin fila|fin celda)/g) || [];
        if (etiquetas.length !== cierres.length) {
          errores++;
        }
      }
      return errores === 0;
    }
    
    // --- L칍GICA EXISTENTE ---
    // updatePreview(), limpiarEditor(), copiarAlPortapapeles(), guardarCodigo(), cargarCodigo(), toggleTheme()
    // [C칍DIGO DE LAS FUNCIONES EXISTENTES]
    
    window.onload = cargarCodigo;
    setInterval(guardarCodigo, 2000);
  </script>
</body>
</html>